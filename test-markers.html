<!DOCTYPE html>
<html>
<head>
    <title>Test Bus Markers</title>
    <style>
        #map {
            height: 100vh;
            width: 100%;
        }
        .info {
            position: absolute;
            top: 10px;
            left: 10px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="info">
        <h3>Bus Markers Test</h3>
        <p id="status">Loading map...</p>
    </div>
    <div id="map"></div>

    <script>
        let map;
        let markers = [];
        
        // College location (correct coordinates)
        const collegeLocation = { lat: 17.083056007230727, lng: 82.05445438182011 };
        
        // Bus data with colors
        const buses = [
            { id: 1, name: 'Bus 1', lat: 17.0005, lng: 81.8040, color: '#667eea' },
            { id: 3, name: 'Bus 3', lat: 16.9891, lng: 82.2711, color: '#dc2626' },
            { id: 4, name: 'Bus 4', lat: 17.1167, lng: 82.2500, color: '#16a34a' },
            { id: 8, name: 'Bus 8', lat: 17.0833, lng: 82.1333, color: '#fbbf24' },
            { id: 90, name: 'Bus 90', lat: 17.0500, lng: 82.1667, color: '#8b5cf6' },
            { id: 12, name: 'Bus 12', lat: 16.5833, lng: 82.0167, color: '#f59e0b' },
            { id: 15, name: 'Bus 15', lat: 16.8667, lng: 81.9333, color: '#06b6d4' },
            { id: 22, name: 'Bus 22', lat: 17.3500, lng: 82.5500, color: '#ef4444' },
            { id: 25, name: 'Bus 25', lat: 16.7333, lng: 82.2167, color: '#10b981' },
            { id: 30, name: 'Bus 30', lat: 16.8333, lng: 82.3000, color: '#f97316' },
            { id: 35, name: 'Bus 35', lat: 16.7833, lng: 81.8833, color: '#ec4899' },
            { id: 40, name: 'Bus 40', lat: 17.0833, lng: 82.3500, color: '#14b8a6' }
        ];

        function initMap() {
            console.log('Initializing map...');
            document.getElementById('status').textContent = 'Map initialized!';
            
            // Create map
            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 10,
                center: collegeLocation,
                mapTypeId: 'roadmap'
            });

            // Add college marker
            const collegeMarker = new google.maps.Marker({
                position: collegeLocation,
                map: map,
                title: 'Pragati Engineering College',
                icon: {
                    path: google.maps.SymbolPath.CIRCLE,
                    scale: 15,
                    fillColor: '#fbbf24',
                    fillOpacity: 1,
                    strokeColor: '#ffffff',
                    strokeWeight: 3
                },
                label: {
                    text: 'ðŸ«',
                    fontSize: '20px'
                }
            });

            console.log('College marker added');

            // Add bus markers
            buses.forEach(bus => {
                const marker = new google.maps.Marker({
                    position: { lat: bus.lat, lng: bus.lng },
                    map: map,
                    title: bus.name,
                    icon: {
                        path: google.maps.SymbolPath.CIRCLE,
                        scale: 12,
                        fillColor: bus.color,
                        fillOpacity: 1,
                        strokeColor: '#ffffff',
                        strokeWeight: 2
                    },
                    label: {
                        text: bus.id.toString(),
                        color: '#ffffff',
                        fontSize: '12px',
                        fontWeight: 'bold'
                    }
                });

                // Add route line
                const routeLine = new google.maps.Polyline({
                    path: [
                        { lat: bus.lat, lng: bus.lng },
                        collegeLocation
                    ],
                    geodesic: true,
                    strokeColor: bus.color,
                    strokeOpacity: 0.7,
                    strokeWeight: 3,
                    map: map
                });

                markers.push(marker);
                console.log(`Added ${bus.name} at (${bus.lat}, ${bus.lng})`);
            });

            document.getElementById('status').textContent = `${buses.length} buses added to map!`;
            console.log('All markers added successfully');
        }

        window.initMap = initMap;
    </script>

    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD735BzVTgQt6ois82KJbv0ZyJvWE_jykg&callback=initMap">
    </script>
</body>
</html>
